# æŠ€æœ¯æ¶æ„è§„åˆ™ - é—å¿˜çš„åƒç´ é­”æ³•å¤§é™†

> æœ¬è§„åˆ™å®šä¹‰é¡¹ç›®çš„æŠ€æœ¯å®ç°æ ‡å‡†ï¼Œæ‰€æœ‰ä»£ç å¿…é¡»éµå¾ªæ­¤è§„åˆ™

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆæ ‡å‡†ï¼ˆä¸å¯æ›´æ”¹ï¼‰

### æ ¸å¿ƒæŠ€æœ¯
- **æ„å»ºå·¥å…·**: Vite 5.xï¼ˆå¿…é¡»ï¼‰
- **æ¸¸æˆå¼•æ“**: Phaser 3.80+ï¼ˆå¿…é¡»ï¼‰
- **å¼€å‘è¯­è¨€**: TypeScript 5.xï¼ˆå¿…é¡»ï¼‰
- **UIæ¡†æ¶**: React 18ï¼ˆä»…UIç•Œé¢ï¼‰
- **çŠ¶æ€ç®¡ç†**: Zustandï¼ˆè½»é‡é«˜æ•ˆï¼‰
- **æ ·å¼æ–¹æ¡ˆ**: TailwindCSSï¼ˆUIéƒ¨åˆ†ï¼‰

### åç«¯ï¼ˆå¯é€‰ï¼‰
- **æœåŠ¡å™¨**: Node.js + Express
- **æ•°æ®åº“**: SQLiteï¼ˆæœ¬åœ°ï¼‰æˆ– PostgreSQLï¼ˆäº‘ç«¯ï¼‰
- **éƒ¨ç½²**: Vercelï¼ˆå‰ç«¯ï¼‰+ Railwayï¼ˆåç«¯ï¼‰

---

## ğŸ“‚ é¡¹ç›®ç»“æ„è§„èŒƒï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰

```
src/
â”œâ”€â”€ game/                    # Phaseræ¸¸æˆæ ¸å¿ƒï¼ˆä¸è¦æ··å…¥Reactï¼‰
â”‚   â”œâ”€â”€ scenes/              # æ¸¸æˆåœºæ™¯
â”‚   â”œâ”€â”€ entities/            # æ¸¸æˆå®ä½“ï¼ˆPlayer, Enemyç­‰ï¼‰
â”‚   â”œâ”€â”€ systems/             # æ¸¸æˆç³»ç»Ÿï¼ˆCombat, Fog, AIç­‰ï¼‰
â”‚   â”œâ”€â”€ managers/            # ç®¡ç†å™¨ï¼ˆResource, Event, Audioï¼‰
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ ui/                      # React UIç»„ä»¶ï¼ˆä¸è¦æ··å…¥æ¸¸æˆé€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ components/          # UIç»„ä»¶
â”‚   â””â”€â”€ hooks/               # React Hooks
â”‚
â”œâ”€â”€ store/                   # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ gameStore.ts         # æ¸¸æˆå…¨å±€çŠ¶æ€
â”‚   â”œâ”€â”€ playerStore.ts       # ç©å®¶çŠ¶æ€
â”‚   â””â”€â”€ uiStore.ts           # UIçŠ¶æ€
â”‚
â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ constants/               # å¸¸é‡é…ç½®
â””â”€â”€ services/                # å¤–éƒ¨æœåŠ¡

public/
â”œâ”€â”€ assets/                  # æ¸¸æˆèµ„æº
â”‚   â”œâ”€â”€ sprites/             # ç²¾çµå›¾
â”‚   â”œâ”€â”€ tilesets/            # åœ°å›¾è´´å›¾
â”‚   â”œâ”€â”€ audio/               # éŸ³é¢‘
â”‚   â””â”€â”€ ui/                  # UIèµ„æº
â””â”€â”€ data/                    # é…ç½®æ•°æ®ï¼ˆJSONï¼‰
```

### ç›®å½•èŒè´£ï¼ˆä¸¥æ ¼åˆ†ç¦»ï¼‰
- `game/` - çº¯æ¸¸æˆé€»è¾‘ï¼Œä¸ä¾èµ–React
- `ui/` - çº¯UIç»„ä»¶ï¼Œä¸åŒ…å«æ¸¸æˆé€»è¾‘
- `store/` - çŠ¶æ€ç®¡ç†ï¼Œè¿æ¥gameå’Œui
- `types/` - å…¨å±€ç±»å‹å®šä¹‰
- `constants/` - é…ç½®å¸¸é‡ï¼ˆæ•°å€¼å¹³è¡¡ï¼‰

---

## ğŸ® Phaseré…ç½®æ ‡å‡†

### å¿…é¡»é…ç½®é¡¹

```typescript
const config: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,
  width: 1280,
  height: 720,
  parent: 'game-container',
  backgroundColor: '#2d2d2d',
  
  // åƒç´ æ¸¸æˆå¿…é¡»å¼€å¯
  pixelArt: true,
  antialias: false,
  roundPixels: true,
  
  // ç‰©ç†å¼•æ“é…ç½®
  physics: {
    default: 'arcade',
    arcade: {
      gravity: { x: 0, y: 0 }, // ä¿¯è§†è§’æ— é‡åŠ›
      debug: process.env.NODE_ENV === 'development',
    },
  },
  
  // åœºæ™¯é…ç½®
  scene: [BootScene, MenuScene, GameScene, UIScene],
  
  // è‡ªé€‚åº”é…ç½®
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH,
  },
};
```

### ç¦æ­¢é…ç½®
- âŒ `antialias: true` - ä¼šå¯¼è‡´åƒç´ æ¨¡ç³Š
- âŒ `roundPixels: false` - ä¼šå¯¼è‡´æŠ–åŠ¨
- âŒ ä¸è¦ä½¿ç”¨éæ•´æ•°å€ç¼©æ”¾

---

## ğŸ›ï¸ æ ¸å¿ƒç³»ç»Ÿæ¶æ„è§„èŒƒ

### 1. åœºæ™¯ï¼ˆSceneï¼‰è§„èŒƒ

#### å¿…é¡»çš„åœºæ™¯
- **BootScene** - é¢„åŠ è½½åœºæ™¯ï¼ˆåŠ è½½æ ¸å¿ƒèµ„æºï¼‰
- **MenuScene** - ä¸»èœå•åœºæ™¯
- **GameScene** - ä¸»æ¸¸æˆåœºæ™¯
- **UIScene** - UIè¦†ç›–å±‚ï¼ˆç”Ÿå‘½æ¡ã€æŠ€èƒ½æ ï¼‰

#### åœºæ™¯ç”Ÿå‘½å‘¨æœŸ
```typescript
class GameScene extends Phaser.Scene {
  preload() {
    // åŠ è½½èµ„æº
  }
  
  create() {
    // åˆå§‹åŒ–æ¸¸æˆå¯¹è±¡
    // åˆ›å»ºç³»ç»Ÿï¼ˆFogSystem, CombatSystemç­‰ï¼‰
    // è®¾ç½®äº‹ä»¶ç›‘å¬
  }
  
  update(time: number, delta: number) {
    // æ¯å¸§æ›´æ–°
    // æ›´æ–°ç³»ç»Ÿ
  }
}
```

#### åœºæ™¯é€šä¿¡è§„åˆ™
- ä½¿ç”¨ `this.scene.start/stop/pause/resume()` åˆ‡æ¢åœºæ™¯
- ä½¿ç”¨äº‹ä»¶ç³»ç»Ÿé€šä¿¡ï¼ˆä¸è¦ç›´æ¥å¼•ç”¨ï¼‰
- æ•°æ®é€šè¿‡ `this.scene.get()` æˆ– Zustandä¼ é€’

### 2. å®ä½“ï¼ˆEntityï¼‰è§„èŒƒ

#### ç©å®¶å®ä½“
```typescript
export class Player extends Phaser.Physics.Arcade.Sprite {
  // å¿…é¡»å±æ€§
  private health: number;
  private maxHealth: number;
  private mana: number;
  private maxMana: number;
  private speed: number;
  
  // å¿…é¡»æ–¹æ³•
  update(time: number, delta: number): void;
  takeDamage(amount: number): void;
  heal(amount: number): void;
  castSkill(skillId: string): void;
}
```

#### æ•Œäººå®ä½“
```typescript
export class Enemy extends Phaser.Physics.Arcade.Sprite {
  // å¿…é¡»å±æ€§
  private health: number;
  private aiState: 'idle' | 'patrol' | 'chase' | 'attack';
  
  // å¿…é¡»æ–¹æ³•
  update(time: number, delta: number): void;
  updateAI(): void;
  takeDamage(amount: number): void;
}
```

#### å®ä½“è§„èŒƒ
- å¿…é¡»ç»§æ‰¿ `Phaser.Physics.Arcade.Sprite`
- å¿…é¡»å®ç° `update()` æ–¹æ³•
- å±æ€§ä½¿ç”¨ private/protectedï¼ˆå°è£…ï¼‰
- ä¸è¦åœ¨å®ä½“å†…å¤„ç†UIæ›´æ–°ï¼ˆé€šè¿‡äº‹ä»¶ï¼‰

### 3. ç³»ç»Ÿï¼ˆSystemï¼‰è§„èŒƒ

#### å¿…é¡»å®ç°çš„ç³»ç»Ÿ
1. **FogSystem** - è¿·é›¾ç³»ç»Ÿ
2. **CombatSystem** - æˆ˜æ–—ç³»ç»Ÿ
3. **MagicSystem** - é­”æ³•ç³»ç»Ÿ
4. **AISystem** - AIç³»ç»Ÿ
5. **InventorySystem** - èƒŒåŒ…ç³»ç»Ÿ
6. **QuestSystem** - ä»»åŠ¡ç³»ç»Ÿ
7. **SaveSystem** - å­˜æ¡£ç³»ç»Ÿ

#### ç³»ç»Ÿæ ‡å‡†æ¥å£
```typescript
export class GameSystem {
  protected scene: Phaser.Scene;
  
  constructor(scene: Phaser.Scene) {
    this.scene = scene;
    this.init();
  }
  
  protected init(): void {
    // åˆå§‹åŒ–ç³»ç»Ÿ
  }
  
  update(time: number, delta: number): void {
    // æ¯å¸§æ›´æ–°
  }
  
  destroy(): void {
    // æ¸…ç†èµ„æº
  }
}
```

#### ç³»ç»Ÿè§„èŒƒ
- ç³»ç»Ÿå¿…é¡»ç‹¬ç«‹ï¼Œä½è€¦åˆ
- é€šè¿‡äº‹ä»¶ç³»ç»Ÿé€šä¿¡ï¼ˆä¸ç›´æ¥å¼•ç”¨å…¶ä»–ç³»ç»Ÿï¼‰
- å¿…é¡»å®ç° `update()` å’Œ `destroy()` æ–¹æ³•
- ä¸è¦åœ¨ç³»ç»Ÿå†…ç›´æ¥æ“ä½œDOM

### 4. ç®¡ç†å™¨ï¼ˆManagerï¼‰è§„èŒƒ

#### ResourceManager
```typescript
export class ResourceManager {
  private loadedAssets: Set<string>;
  
  preloadCore(): void;              // é¢„åŠ è½½æ ¸å¿ƒèµ„æº
  loadArea(areaId: string): void;   // æŒ‰éœ€åŠ è½½åŒºåŸŸ
  unloadArea(areaId: string): void; // å¸è½½ä¸ç”¨çš„èµ„æº
}
```

#### EventManagerï¼ˆå•ä¾‹ï¼‰
```typescript
export class EventManager {
  private static instance: EventManager;
  
  static getInstance(): EventManager;
  emit(event: string, ...args: any[]): void;
  on(event: string, callback: Function): void;
  off(event: string, callback?: Function): void;
}
```

#### AudioManager
```typescript
export class AudioManager {
  playMusic(key: string, volume?: number): void;
  playSFX(key: string, volume?: number): void;
  stopMusic(): void;
  setMusicVolume(volume: number): void;
  setSFXVolume(volume: number): void;
}
```

---

## ğŸ¯ æ ¸å¿ƒç³»ç»Ÿå®ç°è§„èŒƒ

### è¿·é›¾ç³»ç»Ÿï¼ˆFogSystemï¼‰

```typescript
export class FogSystem {
  private fogLayer: Phaser.GameObjects.RenderTexture;
  private exploredMap: Set<string>;
  
  // å¿…é¡»å®ç°
  clearFog(x: number, y: number, radius: number): void;
  regenerateFog(x: number, y: number, radius: number): void;
  isExplored(x: number, y: number): boolean;
  update(time: number, delta: number): void;
}
```

**å®ç°è¦æ±‚**:
- ä½¿ç”¨ `RenderTexture` å®ç°è¿·é›¾é®ç½©
- æ”¯æŒåœ†å½¢/çŸ©å½¢å‡€åŒ–åŒºåŸŸ
- è®°å½•å·²æ¢ç´¢åŒºåŸŸï¼ˆç”¨äºå°åœ°å›¾ï¼‰
- æ”¯æŒåŠ¨æ€å†ç”Ÿï¼ˆé«˜çº§åŠŸèƒ½ï¼‰

### é­”æ³•ç³»ç»Ÿï¼ˆMagicSystemï¼‰

```typescript
interface Skill {
  id: string;
  name: string;
  element: 'fire' | 'ice' | 'thunder' | 'nature';
  manaCost: number;
  cooldown: number;
  effect: (target: Vector2) => void;
}

export class MagicSystem {
  private skills: Map<string, Skill>;
  private cooldowns: Map<string, number>;
  
  // å¿…é¡»å®ç°
  castSkill(skillId: string, target: Vector2): boolean;
  isOnCooldown(skillId: string): boolean;
  tryFusion(skill1: string, skill2: string): string | null;
}
```

**å®ç°è¦æ±‚**:
- æŠ€èƒ½ä»JSONé…ç½®åŠ è½½
- æ£€æŸ¥é­”åŠ›å’Œå†·å´
- åˆ›å»ºæŠ•å°„ç‰©æˆ–ç‰¹æ•ˆ
- æ”¯æŒé­”æ³•èåˆï¼ˆé«˜çº§åŠŸèƒ½ï¼‰

### AIç³»ç»Ÿï¼ˆAISystemï¼‰

```typescript
export class AISystem {
  updateEnemyAI(enemy: Enemy, player: Player, time: number): void;
  
  // AIçŠ¶æ€
  private patrol(enemy: Enemy): void;
  private chase(enemy: Enemy, target: Vector2): void;
  private attack(enemy: Enemy, target: Vector2): void;
}
```

**å®ç°è¦æ±‚**:
- ä½¿ç”¨çŠ¶æ€æœºï¼ˆidle/patrol/chase/attackï¼‰
- æ”¯æŒå¯»è·¯ï¼ˆA*ç®—æ³•ï¼‰
- è§†é‡æ£€æµ‹ï¼ˆç”¨äºå‘ç°ç©å®¶ï¼‰
- è§†é‡å¤–æš‚åœAIï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

---

## ğŸ“¦ çŠ¶æ€ç®¡ç†è§„èŒƒï¼ˆZustandï¼‰

### Storeç»“æ„æ ‡å‡†

```typescript
// src/store/gameStore.ts
interface GameState {
  // çŠ¶æ€
  isPlaying: boolean;
  isPaused: boolean;
  
  // æ•°æ®
  player: PlayerData;
  inventory: InventoryData;
  quests: Quest[];
  
  // Actions
  startGame: () => void;
  pauseGame: () => void;
  saveGame: () => void;
  loadGame: (data: SaveData) => void;
}

export const useGameStore = create<GameState>()(
  immer((set, get) => ({
    // åˆå§‹çŠ¶æ€
    isPlaying: false,
    
    // Actionså®ç°
    startGame: () => set({ isPlaying: true }),
    // ...
  }))
);
```

### Storeä½¿ç”¨è§„èŒƒ
- ä½¿ç”¨ `immer` ä¸­é—´ä»¶ï¼ˆç®€åŒ–ä¸å¯å˜æ›´æ–°ï¼‰
- Actionså¿…é¡»çº¯å‡½æ•°ï¼ˆä¸è¦æœ‰å‰¯ä½œç”¨ï¼‰
- å¤æ‚é€»è¾‘æ”¾åœ¨ç³»ç»Ÿå±‚ï¼ŒStoreåªå­˜çŠ¶æ€
- Reactç»„ä»¶ç”¨ `useGameStore` è®¢é˜…
- Phaseré€šè¿‡äº‹ä»¶æ›´æ–°Storeï¼ˆè§£è€¦ï¼‰

---

## âš¡ æ€§èƒ½ä¼˜åŒ–è§„èŒƒï¼ˆå¿…é¡»éµå®ˆï¼‰

### 1. å¯¹è±¡æ± ï¼ˆObject Poolï¼‰

**å¿…é¡»ä½¿ç”¨å¯¹è±¡æ± çš„æƒ…å†µ**:
- æŠ•å°„ç‰©ï¼ˆç«çƒã€ç®­çŸ¢ç­‰ï¼‰
- ç²’å­æ•ˆæœ
- é¢‘ç¹åˆ›å»ºçš„æ•Œäºº

```typescript
export class ObjectPool<T> {
  private pool: T[] = [];
  
  get(): T;
  release(obj: T): void;
}
```

### 2. è§†é‡å‰”é™¤ï¼ˆCullingï¼‰

```typescript
export class CullingSystem {
  update(): void {
    const bounds = this.camera.worldView;
    
    for (const entity of this.entities) {
      const inView = Phaser.Geom.Rectangle.Overlaps(
        bounds,
        entity.getBounds()
      );
      
      entity.setActive(inView);
      if (!inView) entity.pauseAI?.();
    }
  }
}
```

**è§„åˆ™**:
- è§†é‡å¤–çš„å®ä½“æš‚åœæ›´æ–°
- æ•ŒäººAIåœ¨è§†é‡å¤–åœæ­¢
- ä½¿ç”¨ `setActive(false)` è€Œä¸æ˜¯ `destroy()`

### 3. èµ„æºç®¡ç†

**æŒ‰éœ€åŠ è½½ç­–ç•¥**:
- æ ¸å¿ƒèµ„æºåœ¨BootSceneåŠ è½½
- åŒºåŸŸèµ„æºè¿›å…¥æ—¶åŠ è½½
- ç¦»å¼€åŒºåŸŸæ—¶å¸è½½èµ„æº

```typescript
await this.load.start(); // å¼‚æ­¥åŠ è½½
this.textures.remove(key); // å¸è½½çº¹ç†
```

### 4. çº¹ç†å›¾é›†ï¼ˆå¿…é¡»ä½¿ç”¨ï¼‰

```json
// ä½¿ç”¨TexturePackeråˆæˆå›¾é›†
{
  "frames": {
    "player-0": { "frame": {"x":0,"y":0,"w":16,"h":24} },
    "enemy-0": { "frame": {"x":16,"y":0,"w":16,"h":16} }
  }
}
```

**è§„åˆ™**:
- ç›¸å…³ç²¾çµæ‰“åŒ…æˆå›¾é›†
- å‡å°‘çº¹ç†åˆ‡æ¢ï¼ˆæå‡æ€§èƒ½ï¼‰
- ä½¿ç”¨å‹ç¼©æ ¼å¼ï¼ˆWebPï¼‰

### 5. æ€§èƒ½ç›®æ ‡

- **FPS**: ç¨³å®š60FPS
- **å†…å­˜**: <500MB
- **åŠ è½½æ—¶é—´**: æ ¸å¿ƒèµ„æº<3ç§’
- **å±å¹•å®ä½“**: <200ä¸ª

---

## ğŸ’¾ æ•°æ®å­˜å‚¨è§„èŒƒ

### æœ¬åœ°å­˜å‚¨ï¼ˆLocalStorageï¼‰

```typescript
export class SaveSystem {
  private static SAVE_KEY = 'game-save';
  
  static save(data: SaveData): void {
    localStorage.setItem(this.SAVE_KEY, JSON.stringify(data));
  }
  
  static load(): SaveData | null {
    const saved = localStorage.getItem(this.SAVE_KEY);
    return saved ? JSON.parse(saved) : null;
  }
}
```

**å­˜å‚¨å†…å®¹**:
- ç©å®¶æ•°æ®ï¼ˆç­‰çº§ã€æŠ€èƒ½ã€è£…å¤‡ï¼‰
- èƒŒåŒ…å†…å®¹
- ä»»åŠ¡è¿›åº¦
- å·²æ¢ç´¢åŒºåŸŸ
- æ¸¸æˆè®¾ç½®

### æ•°æ®æ ¼å¼æ ‡å‡†

```typescript
interface SaveData {
  version: string;           // å­˜æ¡£ç‰ˆæœ¬
  timestamp: number;         // ä¿å­˜æ—¶é—´
  player: PlayerData;        // ç©å®¶æ•°æ®
  inventory: InventoryData;  // èƒŒåŒ…
  progress: ProgressData;    // è¿›åº¦
  settings: SettingsData;    // è®¾ç½®
}
```

**ç‰ˆæœ¬ç®¡ç†**:
- æ¯æ¬¡æ›´æ–°å¢åŠ ç‰ˆæœ¬å·
- å®ç°å­˜æ¡£è¿ç§»é€»è¾‘
- å‘åå…¼å®¹æ—§å­˜æ¡£

---

## ğŸ¨ èµ„æºè§„èŒƒ

### å‘½åè§„èŒƒ

```
sprites/
  player/
    player-walk-down-0.png
    player-walk-down-1.png
    player-attack-0.png
  enemies/
    slime-idle-0.png
    slime-move-0.png
  
audio/
  music/
    village.mp3
    forest.mp3
  sfx/
    attack.wav
    step.wav
```

**å‘½åæ ¼å¼**:
- `{category}-{action}-{variant}-{frame}.ext`
- å…¨å°å†™ï¼Œç”¨è¿å­—ç¬¦åˆ†éš”
- å¸§ç¼–å·ä»0å¼€å§‹

### èµ„æºè·¯å¾„

```typescript
// æ­£ç¡®ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„
this.load.image('player', '/assets/sprites/player.png');

// é”™è¯¯ï¼šç›¸å¯¹è·¯å¾„
this.load.image('player', './assets/sprites/player.png');
```

### èµ„æºä¼˜åŒ–

- **å›¾ç‰‡**: WebPæ ¼å¼ï¼Œå‹ç¼©
- **éŸ³é¢‘**: MP3ï¼ˆéŸ³ä¹ï¼‰, WAVï¼ˆéŸ³æ•ˆï¼‰
- **JSON**: å‹ç¼©ï¼ˆå»é™¤ç©ºæ ¼ï¼‰

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰

```typescript
// tests/unit/MagicSystem.test.ts
describe('MagicSystem', () => {
  it('should cast skill when mana sufficient', () => {
    const magic = new MagicSystem(mockScene, mockPlayer);
    expect(magic.castSkill('fireball', target)).toBe(true);
  });
  
  it('should not cast when on cooldown', () => {
    magic.castSkill('fireball', target);
    expect(magic.castSkill('fireball', target)).toBe(false);
  });
});
```

**å¿…é¡»æµ‹è¯•**:
- æ ¸å¿ƒç³»ç»Ÿé€»è¾‘ï¼ˆæˆ˜æ–—ã€é­”æ³•ã€AIï¼‰
- æ•°æ®å­˜å‚¨å’ŒåŠ è½½
- çŠ¶æ€ç®¡ç†ï¼ˆZustandï¼‰

### é›†æˆæµ‹è¯•

```typescript
describe('Combat Integration', () => {
  it('player damages enemy on hit', () => {
    const scene = createMockScene();
    const player = new Player(scene, 0, 0);
    const enemy = new Enemy(scene, 50, 50);
    
    player.attack(enemy);
    expect(enemy.health).toBeLessThan(enemy.maxHealth);
  });
});
```

---

## ğŸ“ ä»£ç è§„èŒƒ

### TypeScriptè§„èŒƒ

```typescript
// å¿…é¡»ï¼šä½¿ç”¨ä¸¥æ ¼æ¨¡å¼
{
  "strict": true,
  "noUnusedLocals": true,
  "noUnusedParameters": true
}

// å¿…é¡»ï¼šå®šä¹‰ç±»å‹
interface Player {
  health: number;
  mana: number;
}

// ä¸è¦ï¼šä½¿ç”¨any
const data: any = {}; // âŒ

// åº”è¯¥ï¼šä½¿ç”¨å…·ä½“ç±»å‹
const data: PlayerData = {}; // âœ…
```

### å‘½åè§„èŒƒ

```typescript
// ç±»ï¼šPascalCase
class GameScene {}

// æ¥å£ï¼šPascalCaseï¼ŒIå‰ç¼€å¯é€‰
interface PlayerData {}

// å˜é‡/å‡½æ•°ï¼šcamelCase
const playerHealth = 100;
function updatePlayer() {}

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const MAX_HEALTH = 100;

// ç§æœ‰å±æ€§ï¼šå‰ç¼€_ï¼ˆå¯é€‰ï¼‰
private _internalState = 0;
```

### æ–‡ä»¶è§„èŒƒ

```typescript
// å•ä¸€èŒè´£ï¼šä¸€ä¸ªæ–‡ä»¶ä¸€ä¸ªç±»/ç³»ç»Ÿ
// âœ… Player.ts
export class Player {}

// âœ… CombatSystem.ts
export class CombatSystem {}

// âŒ GameEntities.ts (åŒ…å«å¤šä¸ªç±»)
```

---

## ğŸš€ éƒ¨ç½²è§„èŒƒ

### æ„å»ºé…ç½®

```typescript
// vite.config.ts
export default defineConfig({
  build: {
    target: 'esnext',
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          phaser: ['phaser'],
          react: ['react', 'react-dom'],
        },
      },
    },
  },
});
```

### ç¯å¢ƒå˜é‡

```bash
# .env.development
VITE_API_URL=http://localhost:3001
VITE_DEBUG=true

# .env.production
VITE_API_URL=https://api.example.com
VITE_DEBUG=false
```

### éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ç”Ÿäº§æ„å»ºæˆåŠŸ
- [ ] èµ„æºæ­£ç¡®åŠ è½½
- [ ] æ€§èƒ½è¾¾æ ‡ï¼ˆ60FPSï¼‰
- [ ] å­˜æ¡£ç³»ç»Ÿæ­£å¸¸
- [ ] ä¸åŒå±å¹•å°ºå¯¸æµ‹è¯•
- [ ] æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

---

## ğŸ› ï¸ å¼€å‘å·¥å…·é…ç½®

### VSCodeé…ç½®

```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

### ESLinté…ç½®

```json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended"
  ],
  "rules": {
    "no-console": "warn",
    "@typescript-eslint/no-unused-vars": "error"
  }
}
```

---

## ğŸ”’ å®‰å…¨è§„èŒƒ

### ä¸è¦æš´éœ²çš„ä¿¡æ¯
- âŒ APIå¯†é’¥
- âŒ æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
- âŒ ç”¨æˆ·æ•æ„Ÿæ•°æ®

### è¾“å…¥éªŒè¯
```typescript
// å¿…é¡»éªŒè¯ç”¨æˆ·è¾“å…¥
function loadSave(data: unknown) {
  if (!isValidSaveData(data)) {
    throw new Error('Invalid save data');
  }
  // ç»§ç»­å¤„ç†
}
```

---

## ğŸ“Š ç›‘æ§ä¸è°ƒè¯•

### Debugæ¨¡å¼

```typescript
export class DebugPanel {
  update(player: Player) {
    this.text.setText([
      `FPS: ${Math.round(this.scene.game.loop.actualFps)}`,
      `Player: (${player.x}, ${player.y})`,
      `Health: ${player.health}/${player.maxHealth}`,
      `Entities: ${this.scene.children.length}`,
    ]);
  }
}
```

### æ€§èƒ½ç›‘æ§

```typescript
// å¸§ç‡ç›‘æ§
const fps = this.game.loop.actualFps;
if (fps < 50) {
  console.warn('Low FPS detected:', fps);
}

// å†…å­˜ç›‘æ§ï¼ˆChromeï¼‰
if (performance.memory) {
  const mb = performance.memory.usedJSHeapSize / 1048576;
  console.log('Memory usage:', mb.toFixed(2), 'MB');
}
```

---

## âœ… ä»£ç å®¡æŸ¥æ¸…å•

### æäº¤å‰æ£€æŸ¥
- [ ] TypeScriptç±»å‹æ— é”™è¯¯
- [ ] ESLintæ— è­¦å‘Š
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æ— æ˜æ˜¾ä¸‹é™
- [ ] ä»£ç ç¬¦åˆè§„èŒƒ
- [ ] æ·»åŠ å¿…è¦æ³¨é‡Š
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£

### æ€§èƒ½æ£€æŸ¥
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] å¸§ç‡ç¨³å®š
- [ ] èµ„æºæ­£ç¡®é‡Šæ”¾
- [ ] ä½¿ç”¨å¯¹è±¡æ± 
- [ ] å®ç°è§†é‡å‰”é™¤

---

## ğŸš« å¸¸è§é”™è¯¯ï¼ˆç¦æ­¢ï¼‰

### Phaserä½¿ç”¨
- âŒ åœ¨Reactç»„ä»¶ä¸­ç›´æ¥æ“ä½œæ¸¸æˆå¯¹è±¡
- âŒ åœ¨æ¸¸æˆå¾ªç¯ä¸­æ“ä½œDOM
- âŒ å¿˜è®°é”€æ¯ä¸ç”¨çš„å¯¹è±¡
- âŒ ä½¿ç”¨ç›¸å¯¹è·¯å¾„åŠ è½½èµ„æº
- âŒ ä¸ä½¿ç”¨å¯¹è±¡æ± é¢‘ç¹åˆ›å»ºå¯¹è±¡

### TypeScript
- âŒ ä½¿ç”¨ `any` ç±»å‹
- âŒ å¿½ç•¥ç±»å‹é”™è¯¯ï¼ˆä½¿ç”¨ `@ts-ignore`ï¼‰
- âŒ ä¸å®šä¹‰æ¥å£

### React
- âŒ åœ¨ç»„ä»¶ä¸­åŒ…å«æ¸¸æˆé€»è¾‘
- âŒ ç›´æ¥ä¿®æ”¹storeçŠ¶æ€
- âŒ è¿‡åº¦æ¸²æŸ“ï¼ˆæœªä½¿ç”¨memo/useMemoï¼‰

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- Phaser 3: https://photonstorm.github.io/phaser3-docs/
- Vite: https://vitejs.dev/
- Zustand: https://zustand-demo.pmnd.rs/
- TypeScript: https://www.typescriptlang.org/

### æœ€ä½³å®è·µ
- Game Programming Patterns: https://gameprogrammingpatterns.com/
- Phaser Examples: https://labs.phaser.io/

---

**è§„åˆ™ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-15  
**çŠ¶æ€**: æ´»è·ƒ

æ‰€æœ‰ä»£ç æäº¤å¿…é¡»ç¬¦åˆæ­¤æŠ€æœ¯æ¶æ„è§„åˆ™ã€‚å¦‚æœ‰ç–‘é—®ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–æå‡ºè®¨è®ºã€‚
