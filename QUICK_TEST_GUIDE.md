# 🎮 快速测试指南 - 角色精灵图集成

## 🚀 启动游戏

### 1. 确保依赖已安装
```bash
# 如果还没安装依赖
npm run install:all
```

### 2. 启动开发服务器
```bash
# 在项目根目录执行
npm run dev
```

这将同时启动：
- 前端服务器: http://localhost:5173
- 后端服务器: http://localhost:3000

### 3. 打开浏览器
访问: http://localhost:5173

---

## 🎯 测试项目

### 玩家角色测试（英雄）

#### 基础移动
- **W** - 向上移动 → 应显示朝北的精灵图
- **S** - 向下移动 → 应显示朝南的精灵图
- **A** - 向左移动 → 应显示朝西的精灵图
- **D** - 向右移动 → 应显示朝东的精灵图

#### 对角线移动
- **W + D** - 向右上移动 → 应显示朝东北的精灵图
- **W + A** - 向左上移动 → 应显示朝西北的精灵图
- **S + D** - 向右下移动 → 应显示朝东南的精灵图
- **S + A** - 向左下移动 → 应显示朝西南的精灵图

#### 攻击测试
- **空格键** - 攻击 → 应看到白色闪光圈

---

### 史莱姆敌人测试

#### 观察AI行为
1. **接近史莱姆**
   - 史莱姆应该检测到玩家
   - 开始追击玩家
   - **检查**: 史莱姆是否朝向玩家方向

2. **远离史莱姆**
   - 史莱姆应该恢复巡逻
   - 在固定路径上移动
   - **检查**: 史莱姆移动时方向是否正确

3. **战斗测试**
   - 靠近史莱姆并攻击（空格键）
   - 观察史莱姆受伤效果（闪白、震动）
   - 观察伤害数字飘字效果
   - **检查**: 史莱姆血量降低，最终被击败

---

## ✅ 预期效果检查清单

### 视觉效果
- [ ] 玩家角色使用真实像素艺术精灵图（非绿色方块）
- [ ] 史莱姆使用真实像素艺术精灵图（非红色方块）
- [ ] 精灵图清晰，放大2倍显示
- [ ] 角色移动流畅无卡顿

### 方向切换
- [ ] 玩家移动时精灵图朝向正确
- [ ] 8个方向都能正确显示
- [ ] 停止移动时保持最后朝向
- [ ] 史莱姆追击时朝向玩家

### 战斗系统
- [ ] 玩家攻击有白色闪光效果
- [ ] 史莱姆受伤时闪白并震动
- [ ] 伤害数字正确飘出
- [ ] 史莱姆被击败后消失

---

## 🐛 如果遇到问题

### 问题1: 看不到角色精灵图（仍然是方块）

**可能原因**:
- 资源路径错误
- 图片文件未正确复制

**解决方案**:
```bash
# 检查资源文件是否存在
ls frontend/public/assets/sprites/hero/
ls frontend/public/assets/sprites/slime/

# 如果文件不存在，重新复制
mkdir -p frontend/public/assets/sprites/hero frontend/public/assets/sprites/slime
cp -r assets/characters/hero/rotations/* frontend/public/assets/sprites/hero/
cp -r assets/characters/slime/rotations/* frontend/public/assets/sprites/slime/

# 重启开发服务器
npm run dev
```

---

### 问题2: 方向切换不正确

**检查项**:
- 打开浏览器控制台（F12）
- 查看是否有纹理加载错误
- 确认所有8个方向的图片都已加载

**解决方案**:
- 清除浏览器缓存（Ctrl + Shift + R 强制刷新）
- 检查 `frontend/src/game/utils/DirectionHelper.ts` 是否正确创建

---

### 问题3: 游戏无法启动

**可能原因**:
- 依赖未安装
- 端口被占用

**解决方案**:
```bash
# 重新安装依赖
rm -rf node_modules frontend/node_modules backend/node_modules
npm run install:all

# 如果端口被占用，杀掉占用进程
lsof -ti:5173 | xargs kill -9
lsof -ti:3000 | xargs kill -9

# 重新启动
npm run dev
```

---

### 问题4: TypeScript 编译错误

**解决方案**:
```bash
# 确保所有依赖已安装
cd frontend && npm install
cd ../backend && npm install

# 重启IDE/编辑器
# 重新运行
cd ..
npm run dev
```

---

## 📊 控制台输出检查

启动游戏后，在浏览器控制台（F12 → Console）应该看到：

```
✅ 真实像素艺术角色已加载
👾 英雄角色: 8方向精灵图（32x32px）
🟢 史莱姆敌人: 8方向精灵图（32x32px）
🎮 支持: south, west, east, north + 4个对角方向
📦 保留临时资源: 哥布林、环境、道具
💡 提示: 角色已支持8方向移动，可根据速度向量自动切换方向
游戏资源加载完成，等待开始...
✅ 玩家角色已创建（使用真实精灵图）
✅ 史莱姆 已创建（使用真实精灵图）
```

如果看到这些日志，说明集成成功！

---

## 🎉 成功标志

当你看到以下情况，说明集成完全成功：

1. ✅ 角色是可爱的像素艺术风格（不是简单的方块）
2. ✅ 移动时角色会自动转向移动方向
3. ✅ 史莱姆追击时朝向玩家
4. ✅ 所有8个方向都能正确显示
5. ✅ 游戏运行流畅无卡顿

---

## 📸 截图检查

建议在测试时截图保存以下场景：
- [ ] 玩家角色8个方向的截图
- [ ] 史莱姆追击玩家的截图
- [ ] 战斗场景截图
- [ ] 游戏整体画面截图

---

## 💡 下一步

测试成功后，可以：
1. **调整视觉效果** - 修改缩放比例、添加特效
2. **添加更多敌人** - 使用相同方式集成其他敌人
3. **实现动画系统** - 升级PixelLab获取动画帧
4. **创建地图瓦片** - 等待瓦片集API修复后集成
5. **优化性能** - 使用精灵图集减少绘制调用

---

## 🆘 需要帮助？

如果遇到其他问题：
1. 查看 `docs/角色精灵图集成完成.md` 了解详细技术细节
2. 查看 `assets/ASSETS_README.md` 了解资源详情
3. 检查浏览器控制台的错误信息
4. 确认所有文件路径正确

---

**祝测试顺利！🎮✨**
