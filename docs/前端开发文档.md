# 遗忘的像素魔法大陆 - 前端项目

一个基于 Phaser 3 + React + TypeScript 的2D像素风格探索游戏。

## 🚀 技术栈

- **构建工具**: Vite 5.x
- **游戏引擎**: Phaser 3.80+
- **开发语言**: TypeScript 5.x
- **UI框架**: React 18
- **状态管理**: Zustand
- **样式方案**: TailwindCSS

## 📦 安装依赖

```bash
npm install
```

或使用 pnpm/yarn:

```bash
pnpm install
# 或
yarn install
```

## 🎮 运行项目

### 开发模式

```bash
npm run dev
```

项目将在 `http://localhost:3000` 启动。

### 构建生产版本

```bash
npm run build
```

### 预览生产构建

```bash
npm run preview
```

## 📂 项目结构

```
program1/
├── public/                     # 静态资源
│   └── assets/                # 游戏资源（图片、音频等）
├── src/
│   ├── game/                  # Phaser游戏核心
│   │   ├── scenes/           # 游戏场景
│   │   ├── entities/         # 游戏实体（玩家、敌人等）
│   │   ├── systems/          # 游戏系统（战斗、迷雾等）
│   │   └── config.ts         # Phaser配置
│   ├── ui/                    # React UI组件
│   │   └── components/       # UI组件
│   ├── store/                 # Zustand状态管理
│   ├── types/                 # TypeScript类型定义
│   ├── constants/             # 常量配置
│   ├── App.tsx               # React根组件
│   └── main.tsx              # 应用入口
├── index.html                 # HTML模板
├── package.json              # 项目依赖
├── tsconfig.json             # TypeScript配置
└── vite.config.ts            # Vite配置
```

## 🎯 核心功能

### 已实现
- ✅ 项目基础架构
- ✅ Phaser游戏初始化
- ✅ 玩家移动控制（WASD）
- ✅ 迷雾系统
- ✅ React UI覆盖层（HUD、背包）
- ✅ 状态管理（Zustand）
- ✅ 存档系统

### 待实现
- ⏳ 战斗系统
- ⏳ 魔法系统
- ⏳ 敌人AI
- ⏳ 任务系统
- ⏳ 技能树
- ⏳ 地图系统
- ⏳ 音效和音乐

## 🎮 操作说明

### 移动
- `W` - 向上移动
- `S` - 向下移动
- `A` - 向左移动
- `D` - 向右移动

### UI快捷键
- `I` - 打开/关闭背包
- `K` - 打开/关闭技能树
- `J` - 打开/关闭任务日志
- `M` - 打开/关闭地图
- `ESC` - 暂停/菜单

## 🔧 开发指南

### 添加新场景

在 `src/game/scenes/` 目录下创建新场景文件：

```typescript
import Phaser from 'phaser';

export class NewScene extends Phaser.Scene {
  constructor() {
    super({ key: 'NewScene' });
  }

  create() {
    // 场景初始化代码
  }

  update(time: number, delta: number) {
    // 每帧更新代码
  }
}
```

### 添加新UI组件

在 `src/ui/components/` 目录下创建新组件：

```tsx
import React from 'react';
import { useGameStore } from '@store/gameStore';

export const NewComponent: React.FC = () => {
  const state = useGameStore((state) => state);
  
  return (
    <div>
      {/* 组件内容 */}
    </div>
  );
};
```

### 状态管理

使用 Zustand 管理全局状态：

```typescript
// 读取状态
const player = useGameStore((state) => state.player);

// 更新状态
const updatePlayerStats = useGameStore((state) => state.updatePlayerStats);
updatePlayerStats({ health: 100 });
```

## 📝 待办事项

### 第一阶段（原型验证）
- [ ] 完善玩家动画
- [ ] 添加第一个敌人
- [ ] 实现基础战斗
- [ ] 添加第一个魔法技能
- [ ] 完成5分钟可玩Demo

### 第二阶段（MVP开发）
- [ ] 完整战斗系统（4个魔法）
- [ ] 5种敌人类型
- [ ] 第一个完整区域
- [ ] 等级和技能树
- [ ] 村庄基础功能

## 🐛 已知问题

- 当前使用占位符图形，需要替换为实际美术资源
- 音效系统未实现
- 需要优化性能

## 📚 参考资源

- [Phaser 3 官方文档](https://photonstorm.github.io/phaser3-docs/)
- [React 官方文档](https://react.dev/)
- [Zustand 文档](https://docs.pmnd.rs/zustand/getting-started/introduction)
- [TypeScript 手册](https://www.typescriptlang.org/docs/)

## 📄 许可证

本项目仅供学习和开发使用。

---

**"在迷雾中，每一步都是勇气；在黑暗中，每一光都是希望。"** 🌟
