# 🎨 游戏资源更新指南

## 🔍 问题诊断

**当前问题**: 游戏显示的都是像素点  
**原因**: `BootScene.ts` 使用了 1x1 像素的占位符图片

**代码位置**: `frontend/src/game/scenes/BootScene.ts` 第 71 行

---

## ✅ 解决方案（3步）

### 步骤 1: 获取游戏资源

#### 🎁 推荐免费资源包（即用型）

**选项 A: Kenney Pixel Platformer** (推荐！)
- 下载: https://kenney.nl/assets/pixel-platformer
- 包含: 角色、敌人、地形
- 协议: CC0 (完全免费)

**选项 B: itch.io 精选包**
- Pixel Adventure: https://pixelfrog-assets.itch.io/pixel-adventure-1
- Tiny RPG: https://cupnooble.itch.io/sprout-lands-asset-pack

**选项 C: 自己绘制**
- 使用 Piskel: https://www.piskelapp.com/
- 或 Aseprite: https://www.aseprite.org/

### 步骤 2: 放置资源文件

下载后，将资源放到对应目录：

```bash
frontend/public/assets/
├── sprites/
│   ├── player/
│   │   ├── idle.png          # 玩家站立
│   │   ├── walk.png          # 玩家行走（精灵表）
│   │   └── attack.png        # 玩家攻击
│   │
│   ├── enemies/
│   │   ├── slime.png         # 史莱姆
│   │   └── goblin.png        # 哥布林
│   │
│   └── environment/
│       ├── tree.png          # 树
│       └── rock.png          # 石头
│
└── tilesets/
    └── terrain.png           # 地形贴图
```

### 步骤 3: 更新代码加载资源

编辑 `frontend/src/game/scenes/BootScene.ts`：

```typescript
private loadAssets() {
  // ========== 玩家资源 ==========
  this.load.image('player-idle', '/assets/sprites/player/idle.png');
  
  // 如果是精灵表（多帧动画）
  this.load.spritesheet('player-walk', '/assets/sprites/player/walk.png', {
    frameWidth: 32,    // 每帧宽度
    frameHeight: 32,   // 每帧高度
  });
  
  // ========== 敌人资源 ==========
  this.load.image('enemy-slime', '/assets/sprites/enemies/slime.png');
  this.load.image('enemy-goblin', '/assets/sprites/enemies/goblin.png');
  
  // ========== 环境资源 ==========
  this.load.image('tree', '/assets/sprites/environment/tree.png');
  this.load.image('rock', '/assets/sprites/environment/rock.png');
  
  // ========== 地形贴图 ==========
  this.load.image('terrain', '/assets/tilesets/terrain.png');
  
  // 删除这行占位符
  // this.load.image('placeholder', 'data:image/png;base64,...');
}
```

---

## 🚀 快速测试方案

如果你想立即看到效果，可以使用简单的测试图片：

### 创建测试精灵

我帮你创建一个简单的测试精灵：

```typescript
// frontend/src/game/scenes/BootScene.ts

private loadAssets() {
  // 临时方案：创建彩色方块作为测试
  
  // 创建玩家精灵（蓝色方块）
  const playerTexture = this.textures.createCanvas('player-test', 32, 32);
  if (playerTexture) {
    const ctx = playerTexture.getContext();
    ctx.fillStyle = '#4a90e2'; // 蓝色
    ctx.fillRect(0, 0, 32, 32);
    playerTexture.refresh();
  }
  
  // 创建敌人精灵（红色方块）
  const enemyTexture = this.textures.createCanvas('enemy-test', 32, 32);
  if (enemyTexture) {
    const ctx = enemyTexture.getContext();
    ctx.fillStyle = '#e74c3c'; // 红色
    ctx.fillRect(0, 0, 32, 32);
    enemyTexture.refresh();
  }
  
  // 创建地面（绿色方块）
  const groundTexture = this.textures.createCanvas('ground-test', 64, 64);
  if (groundTexture) {
    const ctx = groundTexture.getContext();
    ctx.fillStyle = '#27ae60'; // 绿色
    ctx.fillRect(0, 0, 64, 64);
    groundTexture.refresh();
  }
}
```

这样你会看到：
- 🟦 蓝色方块 = 玩家
- 🟥 红色方块 = 敌人  
- 🟩 绿色方块 = 地面

---

## 📐 资源规格说明

### 推荐尺寸

| 类型 | 尺寸 | 说明 |
|------|------|------|
| 小型角色/敌人 | 16x16 或 32x32 | 标准像素风格 |
| 中型角色 | 48x48 或 64x64 | 更多细节 |
| Boss | 128x128+ | 大型敌人 |
| 地形贴图 | 16x16 或 32x32 | 单个格子 |

### 文件格式

- ✅ **PNG** - 支持透明背景（推荐）
- ✅ **JPG** - 背景图、不需要透明
- ❌ **GIF** - 不推荐（用精灵表代替）

### 命名规范

```
✅ 好的命名:
- player_idle.png
- enemy_slime.png
- tileset_grass.png

❌ 不好的命名:
- Player Idle.png  (有空格)
- 玩家.png        (中文)
- img1.png        (无意义)
```

---

## 🎨 精灵表（Sprite Sheet）详解

### 什么是精灵表？

精灵表是将多个动画帧放在一张图上：

```
[站立1][站立2][站立3][站立4]
[行走1][行走2][行走3][行走4]
[攻击1][攻击2][攻击3][攻击4]
```

### 如何加载精灵表

```typescript
// 加载精灵表
this.load.spritesheet('player-animations', '/assets/sprites/player/spritesheet.png', {
  frameWidth: 32,     // 每一帧的宽度
  frameHeight: 32,    // 每一帧的高度
});

// 创建动画
this.anims.create({
  key: 'player-walk',
  frames: this.anims.generateFrameNumbers('player-animations', { 
    start: 4,   // 从第5帧开始（行走动画）
    end: 7      // 到第8帧结束
  }),
  frameRate: 10,      // 每秒10帧
  repeat: -1          // 无限循环
});

// 使用动画
const player = this.add.sprite(100, 100, 'player-animations');
player.play('player-walk');
```

---

## 🛠️ 在线工具推荐

### 图片编辑
1. **Piskel** (https://www.piskelapp.com/)
   - 在线像素画工具
   - 支持动画和精灵表导出
   - 完全免费

2. **Photopea** (https://www.photopea.com/)
   - 在线 Photoshop 替代品
   - 支持 PSD 格式

### 精灵表生成
1. **TexturePacker** (https://www.codeandweb.com/texturepacker)
   - 专业精灵表打包工具
   - 有免费版本

2. **Shoebox** (https://renderhjs.net/shoebox/)
   - 免费精灵表工具
   - 支持多种导出格式

---

## 📚 推荐资源网站

### 免费资源

| 网站 | 特点 | 链接 |
|------|------|------|
| **Kenney** | 最全面，CC0协议 | https://kenney.nl/ |
| **OpenGameArt** | 社区贡献，多种协议 | https://opengameart.org/ |
| **itch.io** | 大量独立开发者资源 | https://itch.io/game-assets |
| **Craft Pix** | 精美资源包 | https://craftpix.net/freebies/ |

### 付费资源（高质量）

| 网站 | 价格范围 | 链接 |
|------|----------|------|
| **GameArt2D** | $5-$30 | https://www.gameart2d.com/ |
| **Itch.io Premium** | $5-$20 | https://itch.io/game-assets |
| **Unity Asset Store** | $10-$50 | https://assetstore.unity.com/ |

---

## ⚡ 快速上手示例

### 1分钟快速替换

如果你现在就想看到效果：

```bash
# 1. 下载 Kenney 的 Pixel Platformer
# 访问: https://kenney.nl/assets/pixel-platformer
# 点击 "Download" 按钮

# 2. 解压后，将文件复制到项目
# 将 "characters" 文件夹 → frontend/public/assets/sprites/player/
# 将 "enemies" 文件夹 → frontend/public/assets/sprites/enemies/
# 将 "tilemap" 文件夹 → frontend/public/assets/tilesets/

# 3. 更新代码（见上方步骤3）

# 4. 重启开发服务器
npm run dev
```

刷新浏览器，你应该能看到真正的精灵图了！

---

## 🐛 常见问题

### Q1: 图片加载不出来？

**检查清单**:
```typescript
// ✅ 路径以 / 开头
this.load.image('player', '/assets/sprites/player.png');

// ❌ 错误示例
this.load.image('player', 'assets/sprites/player.png');  // 缺少 /
```

### Q2: 图片显示模糊？

```typescript
// 在游戏配置中设置像素完美渲染
// frontend/src/game/PhaserGame.tsx

const config: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,
  pixelArt: true,  // 👈 添加这一行
  render: {
    pixelArt: true,
    antialias: false,
  },
};
```

### Q3: 动画不流畅？

调整帧率：
```typescript
this.anims.create({
  key: 'walk',
  frames: ...,
  frameRate: 12,  // 增加帧率（默认是10）
  repeat: -1
});
```

---

## 📞 获取帮助

如果遇到问题：
1. 检查浏览器控制台（F12）的错误信息
2. 确认文件路径正确
3. 验证图片文件格式（推荐 PNG）
4. 查看 Phaser 文档: https://phaser.io/docs

---

**现在开始装扮你的像素世界吧！** 🎮✨
