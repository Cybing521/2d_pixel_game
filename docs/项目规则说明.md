# ✅ 项目规则已实施

## 🎯 实施的规则

### 1. 文档管理规则 ⭐⭐⭐
**所有 MD 文档必须在 docs/ 目录**

#### 已完成
- ✅ 创建 `.cursor/rules/project-management-rules.mdc` - 完整规则
- ✅ 创建 `docs/文档管理规范.md` - 简化规范
- ✅ 创建 `docs/测试/` 子目录 - 存放临时测试文档
- ✅ 移动根目录所有 MD 文档到 docs/
- ✅ 根目录只保留 `README.md`
- ✅ 更新 `docs/README.md` - 添加规范说明

#### 规则内容
```
📁 文档位置
- docs/              ← 所有永久文档
- docs/测试/         ← 临时测试文档
- 根目录/README.md   ← 唯一例外
```

---

### 2. 代码更新规则 ⭐⭐⭐
**必须更新旧代码，不要创建重复**

#### 检查清单
- [ ] 是否有同名文件？→ 更新而非新建
- [ ] 是否有相似功能？→ 整合而非重复
- [ ] 是否有冲突逻辑？→ 重构统一
- [ ] 是否影响其他模块？→ 同步更新

#### 示例
```
❌ 错误：创建 Player2.ts, EnemyNew.ts
✅ 正确：更新 Player.ts, Enemy.ts
```

---

### 3. 文档更新规则 ⭐⭐⭐
**代码变更必须同步更新文档**

#### 必须更新的文档
每次代码变更时，更新这些文档：
1. `docs/已完成功能总结.md` - 标记完成状态
2. `docs/下一步优化计划.md` - 更新任务进度
3. `docs/更新日志.md` - 记录变更
4. `docs/README.md` - 更新文档索引

---

### 4. 测试文档清理规则 ⭐⭐⭐
**功能完成后删除测试文档**

#### 判断标准
- ✅ 功能已完全实现
- ✅ 功能已测试通过
- ✅ 功能已整合到主文档

#### 流程
```
1. 功能开发 → 创建 docs/测试/xxx测试.md
2. 功能完成 → 测试验证
3. 测试通过 → 更新主文档
4. 删除测试文档 → 保持清洁
```

#### 已清理
当前不需要清理（测试文档会在功能完成后删除）

---

## 📁 当前文档结构

```
project/
├── README.md                        # 项目入口（唯一例外）
├── .cursor/
│   └── rules/
│       └── project-management-rules.mdc  # 完整规则
└── docs/
    ├── README.md                    # 文档索引
    ├── 文档管理规范.md              # 简化规范 ⭐
    ├── 项目规则说明.md              # 本文档 ⭐
    ├── 游戏设计文档.md
    ├── 技术架构文档.md
    ├── 功能特性列表.md
    ├── 开发路线图.md
    ├── 下一步优化计划.md
    ├── 已完成功能总结.md
    ├── 更新日志.md
    ├── 数据持久化说明.md
    ├── 村庄系统说明.md
    ├── 新功能说明.md
    └── 测试/                        # 临时测试文档
        └── (功能完成后删除)
```

---

## 🔄 标准工作流

### 新功能开发
```
1. 接收任务
   ↓
2. 检查是否有旧代码/文档需要更新
   ↓
3. 更新/创建代码（不要重复）
   ↓
4. 更新相关文档（已完成、计划、日志）
   ↓
5. 创建测试文档（如需要）→ docs/测试/
   ↓
6. 测试验证
   ↓
7. 删除测试文档（功能完成后）
   ↓
8. 提交代码
```

---

## ✅ 提交前检查

### 每次提交前必须检查
```bash
# 1. 检查根目录是否有多余MD文档
ls *.md | grep -v README.md
# 应该没有输出

# 2. 检查是否更新了主文档
git diff docs/已完成功能总结.md
git diff docs/下一步优化计划.md
git diff docs/更新日志.md

# 3. 检查测试文档是否需要删除
ls docs/测试/
# 如果功能已完成，删除对应测试文档
```

---

## 📋 快速参考

### 文档存放位置
| 文档类型 | 存放位置 | 是否删除 |
|---------|---------|---------|
| 设计文档 | docs/ | 永久保留 |
| 技术文档 | docs/ | 长期保留 |
| 系统说明 | docs/ | 长期保留 |
| 测试文档 | docs/测试/ | 完成后删除 ⚠️ |
| 项目README | 根目录/ | 永久保留 |

### 需要更新的文档
| 场景 | 需要更新的文档 |
|-----|--------------|
| 新功能开发 | 已完成总结 + 优化计划 + 更新日志 |
| Bug修复 | 更新日志 |
| 代码重构 | 技术架构文档 + 更新日志 |
| 功能完成 | 删除测试文档 + 更新主文档 |

---

## 🎯 目标

遵守这些规则，让项目：
- 📁 **结构清晰** - 文档都在 docs/
- 🔄 **实时同步** - 代码变文档变
- 🗑️ **保持清洁** - 完成即删除
- 📚 **易于维护** - 规范统一

---

## 🔗 相关文档

- **完整规则**: `.cursor/rules/project-management-rules.mdc`
- **简化规范**: `docs/文档管理规范.md`
- **文档索引**: `docs/README.md`

---

**规则已实施，请严格遵守！** 📝✨
