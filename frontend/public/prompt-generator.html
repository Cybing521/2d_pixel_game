<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¨ AIç²¾çµå›¾ç”Ÿæˆå™¨ - æç¤ºè¯æµè§ˆå·¥å…·</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }
    
    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    
    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }
    
    .stats {
      display: flex;
      justify-content: space-around;
      padding: 20px;
      background: #f8f9fa;
      border-bottom: 2px solid #e9ecef;
    }
    
    .stat {
      text-align: center;
    }
    
    .stat-number {
      font-size: 2em;
      font-weight: bold;
      color: #667eea;
    }
    
    .stat-label {
      color: #6c757d;
      font-size: 0.9em;
      margin-top: 5px;
    }
    
    .controls {
      padding: 20px;
      background: #f8f9fa;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
    }
    
    .filter-group {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .filter-group label {
      font-weight: 600;
      color: #495057;
    }
    
    select, input {
      padding: 10px 15px;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      font-size: 1em;
      outline: none;
      transition: all 0.3s;
    }
    
    select:focus, input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .search-box {
      flex: 1;
      min-width: 250px;
    }
    
    .content {
      padding: 30px;
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
    }
    
    .card {
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s;
      position: relative;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border-color: #667eea;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f8f9fa;
    }
    
    .card-title {
      font-size: 1.3em;
      font-weight: bold;
      color: #212529;
    }
    
    .card-category {
      display: inline-block;
      padding: 5px 12px;
      background: #667eea;
      color: white;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
    }
    
    .card-info {
      margin-bottom: 15px;
    }
    
    .info-item {
      margin: 8px 0;
      font-size: 0.95em;
      color: #6c757d;
    }
    
    .info-label {
      font-weight: 600;
      color: #495057;
      margin-right: 5px;
    }
    
    .prompt-text {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      font-size: 0.9em;
      line-height: 1.6;
      color: #495057;
      margin-bottom: 15px;
      max-height: 150px;
      overflow-y: auto;
    }
    
    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    
    .tag {
      padding: 4px 10px;
      background: #e9ecef;
      color: #495057;
      border-radius: 12px;
      font-size: 0.8em;
    }
    
    .actions {
      display: flex;
      gap: 10px;
    }
    
    button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-copy {
      background: #667eea;
      color: white;
    }
    
    .btn-copy:hover {
      background: #5568d3;
      transform: scale(1.05);
    }
    
    .btn-copy:active {
      transform: scale(0.95);
    }
    
    .btn-download {
      background: #28a745;
      color: white;
    }
    
    .btn-download:hover {
      background: #218838;
    }
    
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #28a745;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      display: none;
      animation: slideIn 0.3s ease-out;
      z-index: 1000;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .toast.show {
      display: block;
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #6c757d;
    }
    
    .empty-state h3 {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    
    .loading {
      text-align: center;
      padding: 60px;
    }
    
    .spinner {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ¨ AIç²¾çµå›¾ç”Ÿæˆå™¨</h1>
      <p>ä¸ºã€Šé—å¿˜çš„åƒç´ é­”æ³•å¤§é™†ã€‹ç”Ÿæˆæ¸¸æˆèµ„æº</p>
    </div>
    
    <div class="stats" id="stats">
      <div class="stat">
        <div class="stat-number" id="totalCount">0</div>
        <div class="stat-label">æ€»æç¤ºè¯</div>
      </div>
      <div class="stat">
        <div class="stat-number" id="categoryCount">0</div>
        <div class="stat-label">åˆ†ç±»</div>
      </div>
      <div class="stat">
        <div class="stat-number" id="filteredCount">0</div>
        <div class="stat-label">å½“å‰æ˜¾ç¤º</div>
      </div>
    </div>
    
    <div class="controls">
      <div class="filter-group">
        <label>ç±»åˆ«:</label>
        <select id="categoryFilter">
          <option value="all">å…¨éƒ¨</option>
        </select>
      </div>
      
      <div class="filter-group">
        <label>æ ‡ç­¾:</label>
        <select id="tagFilter">
          <option value="all">å…¨éƒ¨æ ‡ç­¾</option>
        </select>
      </div>
      
      <input 
        type="text" 
        id="searchBox" 
        class="search-box" 
        placeholder="ğŸ” æœç´¢æç¤ºè¯..."
      >
      
      <button class="btn-download" onclick="downloadAllPrompts()">
        ğŸ“¥ å¯¼å‡ºå…¨éƒ¨
      </button>
    </div>
    
    <div class="content">
      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>åŠ è½½æç¤ºè¯åº“...</p>
      </div>
      <div class="grid" id="grid" style="display: none;"></div>
      <div class="empty-state" id="emptyState" style="display: none;">
        <h3>ğŸ˜” æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æç¤ºè¯</h3>
        <p>å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…³é”®è¯</p>
      </div>
    </div>
  </div>
  
  <div class="toast" id="toast"></div>
  
  <script>
    let allPrompts = [];
    let allTags = new Set();
    
    // åŠ è½½æ•°æ®
    async function loadData() {
      try {
        const response = await fetch('/data/ai-prompts.json');
        const data = await response.json();
        processData(data);
        renderAll();
      } catch (error) {
        document.getElementById('loading').innerHTML = `
          <h3>âŒ åŠ è½½å¤±è´¥</h3>
          <p>è¯·ç¡®ä¿ ai-prompts.json æ–‡ä»¶å­˜åœ¨</p>
        `;
      }
    }
    
    // å¤„ç†æ•°æ®
    function processData(data) {
      const categories = ['players', 'enemies', 'environment', 'items', 'effects', 'tilesets', 'ui'];
      
      categories.forEach(category => {
        if (data[category]) {
          extractPrompts(data[category], category);
        }
      });
      
      // ç»Ÿè®¡
      document.getElementById('totalCount').textContent = allPrompts.length;
      document.getElementById('categoryCount').textContent = categories.length;
      document.getElementById('filteredCount').textContent = allPrompts.length;
      
      // å¡«å……ç­›é€‰å™¨
      populateFilters();
    }
    
    // æå–æç¤ºè¯
    function extractPrompts(obj, category, parentName = '') {
      for (const [key, value] of Object.entries(obj)) {
        if (value && typeof value === 'object') {
          if (value.prompt) {
            // è¿™æ˜¯ä¸€ä¸ªæç¤ºè¯å¯¹è±¡
            allPrompts.push({
              category,
              name: parentName ? `${parentName} - ${key}` : key,
              ...value
            });
            
            // æ”¶é›†æ ‡ç­¾
            if (value.tags) {
              value.tags.forEach(tag => allTags.add(tag));
            }
          } else if (!Array.isArray(value)) {
            // é€’å½’å¤„ç†åµŒå¥—å¯¹è±¡
            const newParent = parentName ? `${parentName} - ${value.name || key}` : (value.name || key);
            extractPrompts(value, category, newParent);
          }
        }
      }
    }
    
    // å¡«å……ç­›é€‰å™¨
    function populateFilters() {
      const categoryFilter = document.getElementById('categoryFilter');
      const categories = [...new Set(allPrompts.map(p => p.category))];
      
      categories.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = getCategoryName(cat);
        categoryFilter.appendChild(option);
      });
      
      const tagFilter = document.getElementById('tagFilter');
      [...allTags].sort().forEach(tag => {
        const option = document.createElement('option');
        option.value = tag;
        option.textContent = tag;
        tagFilter.appendChild(option);
      });
    }
    
    // è·å–åˆ†ç±»ä¸­æ–‡å
    function getCategoryName(category) {
      const names = {
        'players': 'ç©å®¶è§’è‰²',
        'enemies': 'æ•Œäºº',
        'environment': 'ç¯å¢ƒ',
        'items': 'ç‰©å“é“å…·',
        'effects': 'ç‰¹æ•ˆ',
        'tilesets': 'åœ°å½¢è´´å›¾',
        'ui': 'UIå…ƒç´ '
      };
      return names[category] || category;
    }
    
    // æ¸²æŸ“æ‰€æœ‰å¡ç‰‡
    function renderAll() {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('grid').style.display = 'grid';
      renderPrompts(allPrompts);
    }
    
    // æ¸²æŸ“æç¤ºè¯å¡ç‰‡
    function renderPrompts(prompts) {
      const grid = document.getElementById('grid');
      const emptyState = document.getElementById('emptyState');
      
      if (prompts.length === 0) {
        grid.style.display = 'none';
        emptyState.style.display = 'block';
        return;
      }
      
      grid.style.display = 'grid';
      emptyState.style.display = 'none';
      grid.innerHTML = '';
      
      prompts.forEach((item, index) => {
        const card = createCard(item, index);
        grid.appendChild(card);
      });
      
      document.getElementById('filteredCount').textContent = prompts.length;
    }
    
    // åˆ›å»ºå¡ç‰‡
    function createCard(item, index) {
      const card = document.createElement('div');
      card.className = 'card';
      
      const tags = item.tags ? item.tags.map(tag => 
        `<span class="tag">${tag}</span>`
      ).join('') : '';
      
      const size = item.size || '32x32';
      const frames = item.frames ? ` (${item.frames}å¸§)` : '';
      
      card.innerHTML = `
        <div class="card-header">
          <div class="card-title">${item.name}</div>
          <div class="card-category">${getCategoryName(item.category)}</div>
        </div>
        
        <div class="card-info">
          <div class="info-item">
            <span class="info-label">ğŸ“ æ–‡ä»¶å:</span>
            ${item.filename}
          </div>
          <div class="info-item">
            <span class="info-label">ğŸ“ å°ºå¯¸:</span>
            ${size}${frames}
          </div>
        </div>
        
        <div class="prompt-text">${item.prompt}</div>
        
        ${tags ? `<div class="tags">${tags}</div>` : ''}
        
        <div class="actions">
          <button class="btn-copy" onclick="copyPrompt(${index})">
            ğŸ“‹ å¤åˆ¶æç¤ºè¯
          </button>
        </div>
      `;
      
      return card;
    }
    
    // å¤åˆ¶æç¤ºè¯
    function copyPrompt(index) {
      const prompts = getCurrentPrompts();
      const item = prompts[index];
      
      navigator.clipboard.writeText(item.prompt).then(() => {
        showToast(`âœ… å·²å¤åˆ¶: ${item.name}`);
      });
    }
    
    // è·å–å½“å‰æ˜¾ç¤ºçš„æç¤ºè¯
    function getCurrentPrompts() {
      const category = document.getElementById('categoryFilter').value;
      const tag = document.getElementById('tagFilter').value;
      const search = document.getElementById('searchBox').value.toLowerCase();
      
      return allPrompts.filter(item => {
        const matchCategory = category === 'all' || item.category === category;
        const matchTag = tag === 'all' || (item.tags && item.tags.includes(tag));
        const matchSearch = search === '' || 
          item.name.toLowerCase().includes(search) ||
          item.prompt.toLowerCase().includes(search) ||
          item.filename.toLowerCase().includes(search);
        
        return matchCategory && matchTag && matchSearch;
      });
    }
    
    // ç­›é€‰
    function filterPrompts() {
      const filtered = getCurrentPrompts();
      renderPrompts(filtered);
    }
    
    // æ˜¾ç¤ºæç¤º
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }
    
    // å¯¼å‡ºæ‰€æœ‰æç¤ºè¯
    function downloadAllPrompts() {
      const prompts = getCurrentPrompts();
      const text = prompts.map(item => 
        `=== ${item.name} ===\n` +
        `æ–‡ä»¶å: ${item.filename}\n` +
        `åˆ†ç±»: ${getCategoryName(item.category)}\n` +
        `æç¤ºè¯: ${item.prompt}\n\n`
      ).join('\n');
      
      const blob = new Blob([text], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'ai-prompts-export.txt';
      a.click();
      
      showToast('âœ… å¯¼å‡ºæˆåŠŸï¼');
    }
    
    // äº‹ä»¶ç›‘å¬
    document.getElementById('categoryFilter').addEventListener('change', filterPrompts);
    document.getElementById('tagFilter').addEventListener('change', filterPrompts);
    document.getElementById('searchBox').addEventListener('input', filterPrompts);
    
    // åˆå§‹åŒ–
    loadData();
  </script>
</body>
</html>
